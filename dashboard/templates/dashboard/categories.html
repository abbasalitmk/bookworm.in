{% extends 'dashboard/base.html' %}

{% block 'content' %}

<div class="page-wrapper">
    <div class="page-content d-flex justify-content-center">
        <div class="card col-10">
            <div class="card-header">
                <h3>Categories</h3>
            </div>
            <form action="" method="POST">
                {% csrf_token %}


            {% if form.errors %}
            <div class="alert alert-danger">
                {% for field, errors in form.errors.items %}
                {% for error in errors %}
                <p>{{ field }}: {{ error }}</p>
                {% endfor %}
                {% endfor %}
            </div>
            {% endif %}

            <div class="card-body">
                <div class="card">
                    <div class="card-body">
                        <div class="row row-cols-1 g-3 row-cols-lg-auto align-items-center">
                            <div class="col">
                                {{form.name}}
                                <!-- <input type="text" name='name' class="form-control"  placeholder="Add new category"> -->
                            </div>
                            
                            <div class="col">
                                <button type="submit" class="btn btn-primary px-4">Save</button>
                            </div>
                        </div><!--end row-->
                    </div>
                </div>
                    </form>
                <ul class="list-group">
                    
                    {% for category in categories  %}
                                                
                    <li class="list-group-item d-flex justify-content-between align-items-center fs-5">{{category.name}} <span
                            class="badge bg-primary rounded-pill">{{category.total_books}}</span> 
                            <span><a href="{% url 'edit_category' category.id %}"><i class="me-3 text-success bx bx-edit"></i></a><a href="{% url 'delete_category' category.id %}"><i class="text-danger bx bx-trash"></i></a></span>
                    </li>
                    {% endfor %}

                    
                </ul>
            </div>
        </div>
  
    </div>
</div>
{% endblock 'content' %}